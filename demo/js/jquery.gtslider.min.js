/**
 * Jquery Multislider (https://github.com/tateogiuseppe/jquery-gtslider)
 * 
 * Apache License, Version 2.0:
 * Copyright (c) 2012 - 2015 Giuseppe Tateo
 * 
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a
 * copy of the License at http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations
 * under the License.
 * 
 * BSD 3-Clause License:
 * Copyright (c) 2012 - 2015 Giuseppe Tateo
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *    - Redistributions of source code must retain the above copyright notice,
 *      this list of conditions and the following disclaimer.
 *    - Redistributions in binary form must reproduce the above copyright notice,
 *      this list of conditions and the following disclaimer in the documentation
 *      and/or other materials provided with the distribution.
 *    - Neither the name of David Stutz nor the names of its contributors may be
 *      used to endorse or promote products derived from this software without
 *      specific prior written permission.
 * 
 * This software is provided by the copyright holders and contributors "as is"
 * and any express or implied warranties, including, but not limited to,
 * the implied warranties of merchantability and fitness for a particular
 * purpose are disclaimed. in no event shall the copyright holder or
 * contributors be liable for any direct, indirect, incidental, special,
 * exemplary, or consequential damages (including, but not limited to,
 * procurement of substitute goods or services; loss of use, data, or profits;
 * or business interruption) however caused and on any theory of liability,
 * whether in contract, strict liability, or tort (including negligence or
 * otherwise) arising in any way out of the use of this software, even if
 * advised of the possibility of such damage.
 */
 
/*
 * Depends:
 *    jquery.ui.core.js
 *    jquery.ui.mouse.js
 *    jquery.ui.widget.js
 */
!function(e,t){var i=5;e.widget("ui.gtslider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,showCalendar:!1,valtype:"int",datevalues:null,startDate:new Date,endDate:new Date},dateDiff:function(e,t){var i=t-e;return isNaN(i)?NaN:Math.floor(i/864e5)},monthDiff:function(e,t){var i=12*(t.getFullYear()-e.getFullYear())-e.getMonth()+t.getMonth();return 0>=i?0:i},daysInMonthDate:function(e){return e.getDate()},_initDate:function(e,t){var i,s=this,a=s.dateDiff(e,t),n=s.monthDiff(e,t),l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],h=new String,r=s.element,u=0,o=0,d=e.getMonth(),v=new Date(e),g=new String;for(v.setDate(1),i=new Date(v),j=0;j<=n;j++)i=new Date(v),i.setMonth(v.getMonth()+j+1),i.setDate(0),o=s.daysInMonthDate(0==j?e:j==n?t:i),o=0==j?s.daysInMonthDate(i)+-o:o,u=(d+j)%12,g=new String(parseFloat((o/a*100).toFixed(3)))+"%",h+='<span class="slider-month" style="width:'+g+'">'+l[u]+"</span>";r.prepend(h)},_create:function(){var t=this,s=this.options;if("date"==s.valtype?(s.step=864e5,s.min=s.min.getTime(),s.max=s.max.getTime(),s.range&&s.values.sort(function(e,t){return e.getTime()-t.getTime()})):s.range&&s.values.sort(),"multi"===s.range&&e.isArray(s.values)&&s.values.length%2!=0)throw this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("gtslider").unbind(".slider"),"The item numer must be paired (array length % 2 = 0)";console.log(s);var a=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),n="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",l=s.values&&s.values.length||1,h=[];if(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(s.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),s.range)if(s.range===!0&&(s.values||(s.values=[this._valueMin(),this._valueMin()])),this.range=new Array(e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header elem1"+("min"===s.range||"max"===s.range?" ui-slider-range-"+s.range:""))),s.range===!0&&s.values.length>1){for(var r=this.range,u=1;u<s.values.length-1;u++)r.push(e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header elem"+new String(u+1)));this.range=r}else if("multi"===s.range&&s.values.length>2){for(var o=this.range,u=2;u<s.values.length;u+=2)o.push(e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"));this.range=o}for(var d=a.length;l>d;d+=1)h.push(n);this.handles=a.add(e(h.join("")).appendTo(t.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){s.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){s.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).addClass(t%2==0?"even":"odd"),e(this).data("index.ui-slider-handle",t)}),this.handles.keydown(function(s){var a,n,l,h,r=!0,u=e(this).data("index.ui-slider-handle");if(!t.options.disabled){switch(s.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(r=!1,!t._keySliding&&(t._keySliding=!0,e(this).addClass("ui-state-active"),a=t._start(s,u),a===!1))return}switch(h=t.options.step,n=l=t.options.values&&t.options.values.length?t.values(u):t.value(),s.keyCode){case e.ui.keyCode.HOME:l=t._valueMin();break;case e.ui.keyCode.END:l=t._valueMax();break;case e.ui.keyCode.PAGE_UP:l=t._trimAlignValue(n+(t._valueMax()-t._valueMin())/i);break;case e.ui.keyCode.PAGE_DOWN:l=t._trimAlignValue(n-(t._valueMax()-t._valueMin())/i);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(n===t._valueMax())return;l=t._trimAlignValue(n+h);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n===t._valueMin())return;l=t._trimAlignValue(n-h)}return t._slide(s,u,l),r}}).keyup(function(i){var s=e(this).data("index.ui-slider-handle");t._keySliding&&(t._keySliding=!1,t._stop(i,s),t._change(i,s),e(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1,s.showCalendar&&this._initDate(new Date(s.min),new Date(s.max))},destroy:function(){if(this.handles.remove(),"[object Array]"===Object.prototype.toString.call(this.range))for(var e=0;e<this.range.length;e++)this.range[e].remove();else this.range.remove();return this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("gtslider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(t){var i,s,a,n,l,h,r,u,o,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},s=this._normValueFromMouse(i),a=this._valueMax()-this._valueMin()+1,l=this,this.handles.each(function(t){var i=Math.abs(s-l.values(t));a>i&&(a=i,n=e(this),h=t)}),d.range===!0&&this.values(1)===d.min&&(h+=1,n=e(this.handles[h])),r=this._start(t,h),r===!1?!1:(this._mouseSliding=!0,l._handleIndex=h,n.addClass("ui-state-active").focus(),u=n.offset(),o=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=o?{left:0,top:0}:{left:t.pageX-u.left-n.width()/2,top:t.pageY-u.top-n.height()/2-(parseInt(n.css("borderTopWidth"),10)||0)-(parseInt(n.css("borderBottomWidth"),10)||0)+(parseInt(n.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,h,s),this._animateOff=!0,!0))},_mouseStart:function(e){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,s,a,n;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/t,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),a=this._valueMax()-this._valueMin(),n=this._valueMin()+s*a,this._trimAlignValue(n)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var s,a,n;if(this.options.values&&this.options.values.length){if(s=this.values(t?0:1),t>0&&i<=this.options.values[t-1]||t<this.options.values.length-1&&i>=this.options.values[t+1])return!1;2===this.options.values.length&&this.options.range===!0&&(0===t&&i>s||1===t&&s>i)&&(i=s),i!==this.values(t)&&(a=this.values(),a[t]=i,n=this._trigger("slide",e,{handle:this.handles[t],value:i,values:a}),n!==!1&&this.values(t,i,!0))}else i!==this.value()&&(n=this._trigger("slide",e,{handle:this.handles[t],value:i}),n!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var s,a,n;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length){if(s=this._values().slice(),"date"==this.options.valtype)for(d=0;d<s.length;d++)s[d]=new Date(s[d]);return s}if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(s=this.options.values,a=arguments[0],n=0;n<s.length;n+=1)s[n]=this._trimAlignValue(a[n]),this._change(null,n);this._refreshValue()},_setOption:function(t,i){var s,a=0;switch(e.isArray(this.options.values)&&(a=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;a>s;s+=1)this._change(null,s);this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,s;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(i=this.options.values.slice(),s=0;s<i.length;s+=1)i[s]=this._trimAlignValue(i[s]);return i},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,s=e-i;return 2*Math.abs(i)>=t&&(s+=i>0?t:-t),parseFloat(s.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,s,a,n,l=this.options.range,h=this.options,r=this,u=this._animateOff?!1:h.animate,o={};this.options.values&&this.options.values.length?this.handles.each(function(s,a){t=(r.values(s)-r._valueMin())/(r._valueMax()-r._valueMin())*100,o["horizontal"===r.orientation?"left":"bottom"]=t+"%",e(this).stop(1,1)[u?"animate":"css"](o,h.animate),(h.range===!0||"multi"===h.range)&&("horizontal"===r.orientation?"multi"===h.range?(s%2===0&&r.range[Math.floor(s/2)].stop(1,1)[u?"animate":"css"]({left:t+"%"},h.animate),s%2===1&&r.range[Math.floor(s/2)][u?"animate":"css"]({width:t-i+"%"},{queue:!1,duration:h.animate})):(0===s?r.range[0].stop(1,1)[u?"animate":"css"]({left:t+"%"},h.animate):1===s?r.range[0][u?"animate":"css"]({width:t-i+"%"},{queue:!1,duration:h.animate}):r.range[s-1][u?"animate":"css"]({width:t-i+"%"},{queue:!1,duration:h.animate}),s>0&&s<r.handles.length-1&&r.range[s].stop(1,1)[u?"animate":"css"]({left:t+"%"},h.animate)):(0===s?r.range[0].stop(1,1)[u?"animate":"css"]({bottom:t+"%"},h.animate):1===s?r.range[0][u?"animate":"css"]({height:t-i+"%"},{queue:!1,duration:h.animate}):r.range[s-1][u?"animate":"css"]({height:t-i+"%"},{queue:!1,duration:h.animate}),s>0&&s<r.handles.length-1&&r.range[s].stop(1,1)[u?"animate":"css"]({bottom:t+"%"},h.animate))),i=t}):(s=this.value(),a=this._valueMin(),n=this._valueMax(),t=n!==a?(s-a)/(n-a)*100:0,o["horizontal"===r.orientation?"left":"bottom"]=t+"%",this.handle.stop(1,1)[u?"animate":"css"](o,h.animate),"min"===l&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:t+"%"},h.animate),"max"===l&&"horizontal"===this.orientation&&this.range[u?"animate":"css"]({width:100-t+"%"},{queue:!1,duration:h.animate}),"min"===l&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:t+"%"},h.animate),"max"===l&&"vertical"===this.orientation&&this.range[u?"animate":"css"]({height:100-t+"%"},{queue:!1,duration:h.animate}))},normValueFromMouse:function(e){return this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),this._normValueFromMouse(e)}}),e.extend(e.ui.gtslider,{version:"0.0.1"})}(jQuery);